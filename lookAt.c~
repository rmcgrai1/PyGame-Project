

static double * lookAt(double* mat, double *eye, double *at, double *up )
{
  /*if ( !Array.isArray(eye) || eye.length != 3) {
        throw "lookAt(): first parameter [eye] must be an a vec3";
    }

    if ( !Array.isArray(at) || at.length != 3) {
        throw "lookAt(): first parameter [at] must be an a vec3";
    }

    if ( !Array.isArray(up) || up.length != 3) {
        throw "lookAt(): first parameter [up] must be an a vec3";
    }
  */
    if ( equal(eye, at) ) {
      return setMatIdentity(mat)
    }
    // revised by Chaoli
    var n = normalize( subtract(eye, at));
    var u = normalize( cross(up, n));
    var v = normalize( cross(n, u));
    var result = mat4(
                      vec4( u, -dot(u, eye) ),
                      vec4( v, -dot(v, eye) ),
                      vec4( n, -dot(n, eye) ),
                      vec4()
                      );
    return result;
}
